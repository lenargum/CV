---
import Layout from "../layouts/Layout.astro";
import CVContent from "../components/CVContent.tsx";

// Import data from data files
import { 
  personalInfo,
  experiences, 
  education, 
  awards,
  teaching,
  generateTags,
  summary
} from "../data";

// SSR language detection from Accept-Language header (guarded for SSG)
const acceptLang = (Astro as any)?.request?.headers?.get?.('accept-language') || '';
const prefersRu = acceptLang.toLowerCase().startsWith('ru');
const initialLang = prefersRu ? 'ru' : 'en';

// Generate tags
const allTags = generateTags();
---

<Layout title="Lenar Gumerov - CV">
  <CVContent
      client:visible
      {personalInfo}
      {summary}
      {experiences}
      {education}
      {awards}
      {teaching}
      {allTags}
      initialLang={initialLang}
    />
  
</Layout>